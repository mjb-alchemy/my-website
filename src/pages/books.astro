---
import BaseLayout from '../layouts/BaseLayout.astro';

// Placeholder data - will be replaced with Google Sheets integration
const books = [
  {
    title: "Sample Book Title",
    author: "Author Name",
    rating: 4,
    referrer: "A friend",
    notes: "Add your notes about this book here. What stood out? What did you learn?",
    dateRead: "2024-01-10"
  }
];

function renderStars(rating: number): string {
  return '★'.repeat(rating) + '☆'.repeat(5 - rating);
}
---

<BaseLayout title="Books">
  <header class="pt-12 pb-16 max-w-3xl relative">
    <div class="sketch-scribble absolute -top-2 right-8 opacity-30" style="width: 100px; height: 60px;"></div>
    <span class="text-label mb-4 block">Reading</span>
    <h1 class="mb-6"><span class="sketch-circle">Books</span></h1>
    <p class="text-body-lg max-w-xl">
      What I've been reading, with notes and who recommended them.
    </p>
  </header>

  <div class="max-w-3xl">
    {books.length === 0 ? (
      <div class="py-24 text-center">
        <p class="text-text-muted mb-2">No books logged yet.</p>
        <p class="text-sm text-text-light">
          Add books to your Google Sheet to see them here.
        </p>
      </div>
    ) : (
      <div class="divide-y divide-border">
        {books.map((book) => (
          <article class="py-8 first:pt-0">
            <div class="flex items-start justify-between gap-6 mb-4">
              <div>
                <h2 class="text-xl font-serif mb-1">{book.title}</h2>
                <p class="text-text-muted">by {book.author}</p>
              </div>
              <span class="stars text-lg shrink-0" title={`${book.rating} out of 5`}>
                {renderStars(book.rating)}
              </span>
            </div>

            {book.notes && (
              <p class="text-text-muted mb-4 leading-relaxed">
                {book.notes}
              </p>
            )}

            <div class="flex flex-wrap items-center gap-4 text-label">
              {book.referrer && (
                <span>
                  Recommended by <span class="text-text">{book.referrer}</span>
                </span>
              )}
              <span>
                {new Date(book.dateRead).toLocaleDateString('en-US', {
                  year: 'numeric',
                  month: 'short'
                })}
              </span>
            </div>
          </article>
        ))}
      </div>
    )}
  </div>
</BaseLayout>
