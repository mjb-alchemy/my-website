---
import '../styles/global.css';
import { Image } from 'astro:assets';
import heroImage from '../assets/hero-image.jpeg';
import gridImage from '../assets/grid image.jpg';
import gridImage2 from '../assets/grid image 2.jpg';
import gridImage3 from '../assets/grid image 3.jpg';
import gridImage4 from '../assets/grid image 4.jpeg';
import gridSeaRanch from '../assets/grid image sea ranch.jpg';
import gridKid from '../assets/grid-kid.jpg';
import coupleGrid from '../assets/couple grid.jpg';
import kiliGrid from '../assets/kili-grid.jpg';
import gridSeaRanch2 from '../assets/grid image sea ranch.jpg';

const base = import.meta.env.BASE_URL;
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="description" content="Meenal Balar ‚Äî illustrations, projects, writing, and reading notes." />
    <title>Meenal Balar</title>
    <script is:inline>
      // Apply terminal mode immediately to prevent flash
      if (localStorage.getItem('terminalMode') === 'true') {
        document.documentElement.classList.add('terminal-mode');
      }
    </script>
    <style>
      /* Active verb transition */
      #active-verb {
        transition: opacity 0.3s ease-in-out;
      }

      /* Hourglass - pendulum swing */
      .hourglass {
        display: inline-block;
        animation: pendulum 3s ease-in-out infinite;
      }

      @keyframes pendulum {
        0% { transform: rotate(0deg); }
        50% { transform: rotate(180deg); }
        100% { transform: rotate(0deg); }
      }

      /* Terminal mode hourglass - green tint */
      .terminal-mode .hourglass {
        filter: sepia(1) saturate(5) hue-rotate(70deg) brightness(1.2);
      }

      /* Bouncing animation */
      @keyframes bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-8px); }
      }

      .easter-egg {
        animation: bounce 1s ease-in-out infinite;
        cursor: pointer;
        user-select: none;
        transition: filter 0.2s;
      }

      .easter-egg:hover {
        animation-play-state: paused;
        filter: brightness(1.2);
      }

      /* Terminal mode styles */
      .terminal-mode {
        --color-bg: #0a0a0a !important;
        --color-bg-alt: #1a1a1a !important;
        --color-text: #00ff00 !important;
        --color-text-muted: #00cc00 !important;
        --color-accent: #00ff00 !important;
        --color-border: #333 !important;
      }

      .terminal-mode * {
        font-family: 'JetBrains Mono', monospace !important;
      }

      .terminal-mode h1,
      .terminal-mode h2,
      .terminal-mode h3 {
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: #00ff00 !important;
      }

      .terminal-mode .font-serif {
        color: #00ff00 !important;
      }

      .terminal-mode .bg-bg-dark {
        background-color: #000 !important;
      }

      .terminal-mode .text-white {
        color: #00ff00 !important;
      }

      .terminal-mode .text-white\/50 {
        color: #00aa00 !important;
      }

      /* Scanline effect */
      .terminal-mode::after {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        pointer-events: none;
        background: repeating-linear-gradient(
          0deg,
          rgba(0, 0, 0, 0.15),
          rgba(0, 0, 0, 0.15) 1px,
          transparent 1px,
          transparent 2px
        );
        z-index: 9999;
      }

      /* Blinking cursor after name */
      .terminal-mode .terminal-cursor::after {
        content: '_';
        animation: blink 1s step-end infinite;
      }

      @keyframes blink {
        0%, 100% { opacity: 1; }
        50% { opacity: 0; }
      }

      /* Green tinted photos in terminal mode */
      .terminal-mode .photo-grid img {
        filter: grayscale(100%) sepia(100%) hue-rotate(70deg) saturate(300%) brightness(0.8);
      }
    </style>
  </head>
  <body class="min-h-screen bg-bg">
    <!-- Full-screen Hero with Side Navigation -->
    <section class="min-h-screen grid grid-cols-1 lg:grid-cols-[1fr_400px] xl:grid-cols-[1fr_500px]">
      <!-- Main Hero Area -->
      <div class="relative flex flex-col p-6 md:p-8 lg:p-12 min-h-[60vh] lg:min-h-0">
        <!-- Top -->
        <header class="flex justify-start items-start">
          <a href={base} class="text-sm font-medium tracking-wide hover:text-accent transition-colors" title="Home">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
            </svg>
          </a>
        </header>

        <!-- Name - aligned with nav -->
        <div class="mt-auto mb-auto lg:mt-[20vh]">
          <h1 class="text-display leading-none terminal-cursor">
            Meenal<br/>Balar
          </h1>
          <p class="text-xl md:text-2xl text-text-muted mt-8 max-w-md">
            <span class="hourglass">‚è≥</span> <span id="active-verb">Tinkering...</span>
          </p>
        </div>

      </div>

      <!-- Right Side Navigation Panel -->
      <nav class="bg-bg-dark text-white p-6 md:p-8 lg:p-12 flex flex-col justify-center">
        <!-- Mobile: 2x2 grid | Desktop: vertical list -->
        <ul class="grid grid-cols-2 gap-4 md:flex md:flex-col md:space-y-8 md:gap-0">
          <li>
            <a href={`${base}sketches`} class="group block py-1">
              <span class="text-xs uppercase tracking-widest text-white/50 block mb-1">01</span>
              <span class="text-xl sm:text-2xl md:text-3xl lg:text-4xl font-serif group-hover:text-accent transition-colors duration-500 ease-in-out">Sketches</span>
            </a>
          </li>
          <li id="home-projects-dropdown" class="relative">
            <div id="home-projects-toggle" class="cursor-pointer py-1">
              <span class="text-xs uppercase tracking-widest text-white/50 block mb-1">02</span>
              <span class="text-xl sm:text-2xl md:text-3xl lg:text-4xl font-serif hover:text-accent transition-colors duration-500 ease-in-out">Projects</span>
            </div>
            <ul id="home-projects-menu" class="hidden md:block mt-2 md:mt-3 space-y-1 md:space-y-2 overflow-hidden">
              <li>
                <a href={`${base}projects/magpie`} class="text-sm md:text-base lg:text-lg text-white/70 hover:text-accent transition-colors duration-500 ease-in-out pl-2 md:pl-4 block py-1">Magpie</a>
              </li>
              <li>
                <a href={`${base}projects/alchemy`} class="text-sm md:text-base lg:text-lg text-white/70 hover:text-accent transition-colors duration-500 ease-in-out pl-2 md:pl-4 block py-1">Alchemy</a>
              </li>
            </ul>
          </li>
          <li>
            <a href={`${base}notes`} class="group block py-1">
              <span class="text-xs uppercase tracking-widest text-white/50 block mb-1">03</span>
              <span class="text-xl sm:text-2xl md:text-3xl lg:text-4xl font-serif group-hover:text-accent transition-colors duration-500 ease-in-out">Notes</span>
            </a>
          </li>
          <li>
            <a href={`${base}books`} class="group block py-1">
              <span class="text-xs uppercase tracking-widest text-white/50 block mb-1">04</span>
              <span class="text-xl sm:text-2xl md:text-3xl lg:text-4xl font-serif group-hover:text-accent transition-colors duration-500 ease-in-out">Shelf</span>
            </a>
          </li>
        </ul>
      </nav>
    </section>

    <!-- About Section -->
    <section id="about" class="grid grid-cols-1 lg:grid-cols-[667px_1fr] min-h-[80vh] py-10 md:py-16 lg:py-24">
      <!-- Left: 3x3 Photo Grid -->
      <div class="flex items-center justify-center lg:justify-start px-4 md:px-8 lg:pl-16 lg:pr-0">
        <div class="photo-grid grid grid-cols-2 md:grid-cols-3 gap-1 md:gap-2 w-full max-w-md md:max-w-none">
          <div class="aspect-square bg-bg-alt overflow-hidden">
            <Image src={heroImage} alt="" width={300} height={300} class="w-full h-full object-cover object-top" />
          </div>
          <div class="aspect-square bg-bg-alt overflow-hidden">
            <Image src={gridSeaRanch} alt="" width={300} height={300} class="w-full h-full object-cover object-top" />
          </div>
          <div class="aspect-square bg-bg-alt overflow-hidden">
            <Image src={gridImage2} alt="" width={300} height={300} class="w-full h-full object-cover object-top" />
          </div>
          <div class="aspect-square bg-bg-alt overflow-hidden">
            <Image src={gridKid} alt="" width={300} height={300} class="w-full h-full object-cover object-top" />
          </div>
          <div class="aspect-square bg-bg-alt overflow-hidden">
            <Image src={coupleGrid} alt="" width={300} height={300} class="w-full h-full object-cover object-top" />
          </div>
          <div class="aspect-square bg-bg-alt overflow-hidden">
            <Image src={gridImage3} alt="" width={300} height={300} class="w-full h-full object-cover object-top" />
          </div>
          <div class="aspect-square bg-bg-alt overflow-hidden">
            <Image src={kiliGrid} alt="" width={300} height={300} class="w-full h-full object-cover object-top" />
          </div>
          <div class="aspect-square bg-bg-alt overflow-hidden">
            <Image src={gridImage4} alt="" width={300} height={300} class="w-full h-full object-cover object-top" />
          </div>
          <div class="aspect-square bg-bg-alt overflow-hidden">
            <Image src={gridImage} alt="" width={300} height={300} class="w-full h-full object-cover object-top" />
          </div>
          <div class="aspect-square bg-bg-alt overflow-hidden md:hidden">
            <Image src={gridSeaRanch2} alt="" width={300} height={300} class="w-full h-full object-cover object-top" />
          </div>
        </div>
      </div>

      <!-- Right: Editorial Letter -->
      <div class="flex flex-col justify-center px-4 md:px-8 lg:pl-12 lg:pr-16 max-w-lg mt-8 md:mt-12 lg:mt-0">
        <p class="text-base md:text-lg lg:text-xl leading-relaxed text-text-muted mb-4 md:mb-6">
          Hi! I'm Meenal. Welcome to my sandbox.
        </p>
        <p class="text-base md:text-lg lg:text-xl leading-relaxed text-text-muted mb-4 md:mb-6">
          I'm drawn to people and projects devoted to human progress. My startup career led me into classrooms, clinics, and communities around the world, expanding access and getting people online. I know what happens when builders lean into their craft, make things easier, or better yet, flip what's broken.
        </p>
        <p class="text-base md:text-lg lg:text-xl leading-relaxed text-text-muted mb-4 md:mb-6">
          Time to pick up my pen, open the terminal, and see what's possible. Reach out if you're in a similar space or want to trade notes. I'd love to hear from you.
        </p>
      </div>
    </section>

    <!-- Footer -->
    <footer class="py-8 md:py-12 px-4 md:px-8 lg:px-16 border-t border-border">
      <div class="flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-text-muted">
        <span>¬© 2026 Meenal Balar</span>
        <div class="flex items-center gap-4">
          <a href="mailto:meenal@whyalchemy.com" class="hover:text-accent transition-colors">
            meenal@whyalchemy.com
          </a>
          <button id="easter-egg" class="easter-egg text-xl" title="üëæ">üëæ</button>
        </div>
      </div>
    </footer>

    <script is:inline>
      // Cycling active verbs
      const verbs = ['Tinkering', 'Sketching', 'Building', 'Reading', 'Ruminating', 'Writing', 'Meditating', 'Exploring', 'Hibernating', 'Reflecting', 'Coding', 'Debugging', 'Shipping', 'Noodling', 'Vibing'];
      let verbIndex = 0;
      const verbElement = document.getElementById('active-verb');

      setInterval(() => {
        verbIndex = (verbIndex + 1) % verbs.length;
        if (verbElement) {
          verbElement.style.opacity = '0';
          setTimeout(() => {
            verbElement.textContent = verbs[verbIndex] + '...';
            verbElement.style.opacity = '1';
          }, 300);
        }
      }, 3000);

      const easterEgg = document.getElementById('easter-egg');
      let terminalMode = localStorage.getItem('terminalMode') === 'true';

      // Update button state on load
      if (terminalMode) {
        easterEgg.textContent = 'üì∞';
        easterEgg.title = 'Back to editorial mode';
      }

      easterEgg?.addEventListener('click', () => {
        terminalMode = !terminalMode;
        localStorage.setItem('terminalMode', terminalMode);
        document.documentElement.classList.toggle('terminal-mode', terminalMode);

        // Scroll to top to see the mode change
        window.scrollTo({ top: 0, behavior: 'smooth' });

        if (terminalMode) {
          easterEgg.textContent = 'üì∞';
          easterEgg.title = 'Back to editorial mode';
        } else {
          easterEgg.textContent = 'üëæ';
          easterEgg.title = 'Enter terminal mode';
        }
      });

      // Home Projects dropdown - mobile: click to toggle, desktop: always visible
      const homeProjectsToggle = document.getElementById('home-projects-toggle');
      const homeProjectsMenu = document.getElementById('home-projects-menu');

      // On mobile, clicking Projects toggles the submenu
      if (homeProjectsToggle && homeProjectsMenu) {
        homeProjectsToggle.addEventListener('click', (e) => {
          // Only toggle on mobile (< 768px)
          if (window.innerWidth < 768) {
            e.preventDefault();
            e.stopPropagation();
            homeProjectsMenu.classList.toggle('hidden');
          }
        });
      }
    </script>
  </body>
</html>
