---
import '../styles/global.css';

interface Props {
  title: string;
  description?: string;
}

const {
  title,
  description = "Meenal Balar — illustrations, projects, writing, and reading notes.",
} = Astro.props;

const currentPath = Astro.url.pathname;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{title} | Meenal Balar</title>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  </head>
  <body class="min-h-screen relative">
    <!-- Decorative elements -->
    <div class="deco-circle hidden lg:block" style="top: -60px; right: -60px; width: 140px; height: 140px;"></div>
    <div class="deco-lines hidden lg:block" style="top: 40%; right: 4%;"></div>

    <nav class="px-6 md:px-12 lg:px-24 py-6 flex items-center justify-between relative z-10">
      <a href="/" class="font-serif text-xl hover:opacity-60 transition-opacity">
        Meenal Balar
      </a>
      <ul class="flex items-center gap-8 text-sm font-medium">
        <li>
          <a
            href="/illustrations"
            class:list={[
              "hover:opacity-60 transition-opacity",
              { "opacity-60": currentPath.startsWith('/illustrations') }
            ]}
          >
            Illustrations
          </a>
        </li>
        <li>
          <a
            href="/projects"
            class:list={[
              "hover:opacity-60 transition-opacity",
              { "opacity-60": currentPath.startsWith('/projects') }
            ]}
          >
            Projects
          </a>
        </li>
        <li>
          <a
            href="/blog"
            class:list={[
              "hover:opacity-60 transition-opacity",
              { "opacity-60": currentPath.startsWith('/blog') }
            ]}
          >
            Blog
          </a>
        </li>
        <li>
          <a
            href="/books"
            class:list={[
              "hover:opacity-60 transition-opacity",
              { "opacity-60": currentPath.startsWith('/books') }
            ]}
          >
            Books
          </a>
        </li>
      </ul>
    </nav>

    <main class="px-6 md:px-12 lg:px-24 pb-24 relative z-10">
      <slot />
    </main>

    <footer class="px-6 md:px-12 lg:px-24 py-8 border-t border-border relative z-10">
      <div class="flex flex-col md:flex-row justify-between items-center gap-4 text-label">
        <span>© 2024 Meenal Balar</span>
        <a href="mailto:hello@meenalbalar.com" class="hover:opacity-60 transition-opacity">
          hello@meenalbalar.com
        </a>
      </div>
    </footer>

    <script>
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", (user: any) => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }
    </script>
  </body>
</html>
